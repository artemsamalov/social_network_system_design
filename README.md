# System Design социальной сети для путешественников

### Функциональные требования:

- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников;

### Нефункциональные требования:

- 10 000 000 DAU;
- Доступность 99,95%;
- Аудитория только страны СНГ;
- Сезонность присутствует: летний, новогодние каникулы, майские праздники.

### Лимиты:

- Макcимум 10 фотографий на пост;
- Максимум 1000 символов на пост;
- Максимум 500 комментариев на пост;
- Максимум 200 символов на комментариий, в среднем 100 символов на комментарий;
- Максимальный размер фото 2 MB;
- Максимум 1000 подписчиков;
- Комментарий не может содержать медиа файлы;
- В среднем 1 публикация поста в месяц от пользователя;
- В среднем 3 фотографии на пост;
- В среднем 100 реакций на 1 пост;
- В среднем 15 реакций на посты в день от пользователя;
- В среднем 5 просмотров ленты в день от пользователя;
- В среднем 20 постов в ленте за раз;
- В среднем написание 3 комментариев в день от пользователя;
- В среднем 10 просмотров комментариев в день от пользователя;
- В среднем 15 комментариев за один запрос;

### Расчеты:

#### Публикация/чтение постов (без учета медиа):
  - в среднем пользователь публикует 1 пост в месяц;
  - в среднем пользователь просматривает ленту 10 раз в день;
  - текст: 2KB (~1000 символов);
  - геопозиция: 48 B;

  - RPS(read) = 10 000 000 * 5 / 86 400 = 578 RPS;
  - RPS(wrtie) = (10 000 000 / 30) * 1 / 86 400 = 4 RPS;
  - Read traffic: 578 RPS * (20 постов * 2048 B) = 24 MB/s;
  - Write traffic: 4 RPS * (10 000 000 / 30 * (1 * 2048 B)) / 86400 = 0,03 MB/s;

#### Публикация/чтение постов медиа
  - в среднем пользователь публикует 1 пост в месяц;
  - в среднем пользователь просматривает ленту 10 раз в день;
  - в среднем 3 фотографии на 1 пост;
  - в среднем размер фотографии 750 KB;
  - RPS read/write посчитан выше;

  - Read traffic: 578 RPS * (20 постов * (3 * 750 KB)) = 26 GB/s.
  - Write traffic: 4 RPS * (10 000 000 / 30 * (3 * 750 KB)) = 0,77 GB/S

#### Реакции
  - В среднем 100 реакций на 1 пост;
  - В среднем 15 реакций на посты в день от пользователя;
  - Read size: 16 B (userId) + 16 B (postId) + 8 B (reactionType) = 40 B;
  - Write size: 16 B (postId) + 8 B (reactionType) = 24 B;

  - RPS(read): 10 000 000 * 20 / 86400 = 2314 RPS;
  - RPS(write): 10 000 000 * 15 / 86400 = 1736 RPS;
  - Read traffic: 2314 * (100 * 40 B) = 9,3 MB/s;
  - Wrtie traffic: 1736 * 24 B = 42 KB/s;

#### Комментарии
- В среднем написание 3 комментариев в день от пользователя;
- В среднем просмотр комментариев у 10 постов в день;
- В среднем 15 комментариев за один запрос;
- В среднем размер запроса 0,5 KB (~250 символов + метаданные);

- RPS(read): 10 000 000 * 10 / 86400 = 1157 RPS;
- RPS(wrtie): 10 000 000 * 3 / 86400 = 350 RPS;
- Read traffic: 1157 * (15 * 0,5 KB) = 65 MB/s;
- Write traffic: 350 * 0,5 KB = 0,2 MB/s 
